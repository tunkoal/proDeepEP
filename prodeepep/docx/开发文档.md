# 开发文档

## 代码职责
- `config.py`：集中管理路径、随机种子与训练超参数；不得通过命令行修改。
- `preprocess.py`：严格校验列名，生成 DeepEP 所需的三份 numpy 文件；记录节点顺序。
- `dataset.py`：负责分层划分与欠采样，提供训练/验证/测试的三元组（表达、嵌入、标签）。
- `metrics_report.py`：封装指标计算、日志格式化与可视化。
- `train.py`：仅负责任务调度与模型调用，不改动 DeepEP 的模型定义。
- `main.py`：入口脚本，串联预处理和训练。

## 开发约定
- 随机种子固定为 42，所有新增随机操作需显式设置。
- 不修改原仓库 `DeepEP` 目录下的源码；如需扩展模型应通过包装方式实现。
- 任何新增文件路径均使用 `config.py` 中的常量拼接。
- 禁止自动容错：列名、路径、维度不匹配时直接抛出异常。

## 运行说明
- 运行前确保 `Nodes.xlsx` 与 `Edges.xlsx` 已放入 `prodeepep/data/raw/`。
- 运行 `python prodeepep/main.py` 会自动生成处理数据、训练模型并保存输出。
- 欠采样策略通过 `config.ENABLE_UNDERSAMPLE` 控制，调试时可关闭以查看完整训练集表现。

## 扩展提示
- 若需调整节点特征或新增指标，请在保持文件职责单一的前提下增量修改相应模块。
- 若替换 node2vec 参数，可在 `preprocess.generate_node2vec_embeddings` 中修改，并同步更新文档。