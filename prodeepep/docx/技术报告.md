# 技术报告

## 模型与超参数
- 模型：直接复用 DeepEP `protein_cnn.CnnModel`，保持卷积核、通道数、嵌入维度、优化器、学习率衰减、dropout 等全部默认设置。
- 时间维度重排：节点的 t0~t35 重塑为 `(3, 12)`，与原模型 `channel_size=3`、`time_steps=12` 对齐。
- 随机种子固定为 42，覆盖 `numpy`、`random`、`tensorflow` 与 node2vec。

## 数据处理
- Node2vec 参数遵循官方示例与原论文：`dimensions=64`、`walk_length=20`、`num_walks=10`、`window=10`，其余默认。
- 生成文件：
  - `protein_emb.npy`：节点按 `Systematic_Name` 顺序排列。
  - `protein_matrix.npy`：基因表达张量 `(N, 3, 12)`。
  - `protein_label.npy`：标签 `(N, 1)`，源自 `Is_Essential`。
- 所有输出写入 `prodeepep/data/processed/`，并记录节点顺序到 `node_index.txt` 便于复现。

## 数据划分与采样
- 分层抽样：训练/验证/测试 = 70%/15%/15%，保持正负比例一致。
- 欠采样：每轮训练保留全部正样本，从训练集负样本中随机选取等量负样本；验证与测试不做采样。
- 开关：`config.ENABLE_UNDERSAMPLE` 控制是否启用欠采样。

## 指标与可视化
- 指标：PPV、TPR、NPV、TNR、F1_Score、AUROC、AUPRC、ACC。
- 日志：每 10 个 epoch 输出一次验证指标，格式与需求示例一致；训练结束后输出测试集完整指标。
- 可视化：保存验证集折线图（每个指标一张）及测试集 ROC 与 PR 曲线，存放在 `prodeepep/output/`。

## 目录规范
- 原始数据：`prodeepep/data/raw/`
- 处理数据：`prodeepep/data/processed/`
- 模型与图表：`prodeepep/output/`
- 文档：`prodeepep/docx/`